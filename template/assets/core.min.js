var Controls,Services,Favourites,StructuredData,Pages,Utilities;class LegacyHeaderControl{constructor(){this.adjustWidth=()=>{this.measureText.text(this.select.find("option:selected").text());const n=this.measureText.outerWidth();this.select.css("width",`${n+69}px`)};this.select=$("[js-legacy-header-select]");this.measureText=$("[js-measure-text]");this.select.on("change",()=>this.adjustWidth());this.adjustWidth()}}(function(n){class t{constructor(){this.textToGet=$(".textToGet");this.window=$(window);this.virtualCanvas=document.createElement("canvas");this.sizeToFrontEnd=n=>{let i=n.innerHTML.trim(),r=n.parentElement,t=550;window.matchMedia("(max-width: 767px)").matches&&(t=535);window.matchMedia("(min-width:768px) and (max-width: 1023px)").matches&&(t=540);window.matchMedia("(min-width:1024px) and (max-width: 1279px)").matches&&(t=545);let u=this.findTextPixelsForStringSize(i,100,t);r.style["font-size"]=u+"px"};this.getTextWidth=(n,t)=>{let i=this.virtualCanvas.getContext("2d");i.font=t;let r=i.measureText(n);return r.width};this.findTextPixelsForStringSize=(n,t,i)=>{let r=t,u=n.toUpperCase(),f=this.getTextWidth(u,"normal "+r+"px arial");while(f>i)r--,f=this.getTextWidth(u,"normal "+r+"px arial");return r};this.textToGet.each((n,t)=>{this.sizeToFrontEnd(t)});let n;this.window.resize(()=>{clearTimeout(n),n=setTimeout(()=>{this.textToGet.each((n,t)=>{this.sizeToFrontEnd(t)})},400)})}}n.TextCurveControl=t})(Controls||(Controls={})),function(n){class t{constructor(){this.resizeTimer=null;this.msnry=null;this.html=$("html");const n=document.querySelector(".themedLinkHolder")!==null;this.rtlMasonry=this.html.attr("dir")!=="rtl";n&&(window.addEventListener("load",()=>this.applyLayoutChanges()),window.addEventListener("resize",()=>this.handleWindowResize()))}handleWindowResize(){this.resizeTimer!==null&&clearTimeout(this.resizeTimer);this.resizeTimer=window.setTimeout(()=>{this.applyLayoutChanges()},300)}applyLayoutChanges(){let n=null;n=window.innerWidth>=1280?{columnWidth:478,itemSelector:".cardLay",gutter:40,isOriginLeft:this.rtlMasonry}:window.innerWidth>=1024?{columnWidth:392,itemSelector:".cardLay",gutter:40,isOriginLeft:this.rtlMasonry}:null;n&&(this.msnry===null?this.msnry=new Masonry(".themedLinkHolder",n):(this.msnry.destroy(),this.msnry=new Masonry(".themedLinkHolder",n)))}}n.ThemedCardLayoutControl=t}(Controls||(Controls={})),function(n){class t{constructor(){this.sessionStorageKeyUid="barilla-uid"}isLoggedIn(){return sessionStorage.getItem(this.sessionStorageKeyUid)!==null?!0:!1}loggedInUserId(){return sessionStorage.getItem(this.sessionStorageKeyUid)}}n.accountHelper=new t}(Utilities||(Utilities={})),function(n){class t{constructor(){this.sessionStorageRecipeKey="barilla-fr";this.localeSlug=location.pathname.split("/")[1];this.urlBase=`/${this.localeSlug}/api/favorites`;this.userId=this.getUserIdentifier()}addFavouriteRecipe(n,t,i){var r=`${this.urlBase}/recipe/add/${n}?uid=${this.userId}`;$.getJSON(r,r=>{console.info("favourited:",n),this.persistRecipeFavourites(r),i(t,!0,n,!0)}).fail(n=>{this.handleApiFailure(n)})}deleteFavouriteRecipe(n,t,i){var r=`${this.urlBase}/recipe/delete/${n}?uid=${this.userId}`;$.getJSON(r,r=>{console.info("unfavourited:",n),this.persistRecipeFavourites(r),i(t,!1,n)}).fail(n=>{this.handleApiFailure(n)})}getFavouriteRecipes(n,t){var i,r;n==!0||sessionStorage.getItem(this.sessionStorageRecipeKey)==null?(r=`${this.urlBase}/recipe?uid=${this.userId}`,$.getJSON(r,n=>{var i;this.persistRecipeFavourites(n);t((i=sessionStorage.getItem(this.sessionStorageRecipeKey))!==null&&i!==void 0?i:"")}).fail(n=>{var i;console.info("api-issue",n.status);t((i=sessionStorage.getItem(this.sessionStorageRecipeKey))!==null&&i!==void 0?i:"")})):t((i=sessionStorage.getItem(this.sessionStorageRecipeKey))!==null&&i!==void 0?i:"")}persistRecipeFavourites(n){sessionStorage.setItem(this.sessionStorageRecipeKey,n)}getUserIdentifier(){return Utilities.accountHelper.loggedInUserId()}handleApiFailure(n){console.info("api-issue",n.status);window.location.assign(`/${this.localeSlug}/status-code/${n.status}`)}}n.favouritesService=t}(Favourites||(Favourites={}));String.prototype.toSnakeCase=function(){return this.replace(new RegExp("-","g"),"_").replace(new RegExp(" ","g"),"_").toLowerCase()},function(n){class t{constructor(){this.eventFormSubmitted="form_submitted";this.eventSocialShared="social_share";this.eventFavouritesAdd="favourite_added"}pushFavouriteAdded(n,t){dataLayer.push({event:this.eventFavouritesAdd,"data-name-product":n.toSnakeCase(),"data-content-type":t.toSnakeCase()})}pushFormSubmitted(n,t,i){var r=n+"-"+t;i+="_form";dataLayer.push({event:this.eventFormSubmitted,"data-form-id":r.toSnakeCase(),"data-form-name":i.toSnakeCase()})}pushSocialShared(n,t,i){dataLayer.push({event:this.eventSocialShared,"data-name-product":t.toSnakeCase(),"data-name-method":n.toSnakeCase(),"data-content-type":i.toSnakeCase()})}}n.dataLayerService=t}(Services||(Services={})),function(n){function t(n,t){var i=$(`[js-favourite-toggle-recipe-card="${n}"]`);t===!0?i.addClass("favourited"):i.removeClass("favourited")}function u(n){var t=n.parentElement;n.classList.add("animate");n.style.display="block";t.classList.add("activeDisplay")}function f(n){var t=n.parentElement;t.classList.remove("activeDisplay");n.classList.remove("animate");n.style.display="none"}function i(n,i,r){u(n);t(r,i);setTimeout(()=>{f(n)},5e3)}class r{constructor(){this.favouritesService=new n.favouritesService;this.dataLayerService=new Services.dataLayerService;this.favouriteToggle=$("[js-favourite-toggle-recipe-card]");this.isLoggedIn=!1;this.loginTrigger=$('[js-member-login-trigger="recipe-card"]');this.onFavouriteClick=function(n){var f=this.favouriteToggle.next(),o=f.prev(),u;f.hide();o.removeClass("activeDisplay");var r=n.target,t=r.nextElementSibling,s=r.parentElement,e=s.getBoundingClientRect(),h=window.innerWidth/2,c=window.innerHeight/3;e.left>=h?t.classList.add("rightDisplay"):t.classList.remove("rightDisplay");e.top>=c?t.classList.add("topDisplay"):t.classList.remove("topDisplay");u=r.getAttribute("js-favourite-toggle-recipe-card").split("/").pop();r.classList.contains("favourited")?this.favouritesService.deleteFavouriteRecipe(u,t,i):(this.favouritesService.addFavouriteRecipe(u,t,i),this.dataLayerService.pushFavouriteAdded(u,"recipe-card"))};this.setLoggedInState();this.isLoggedIn&&this.setupMemberOnlyActions()}isFavourite(){this.favouritesService.getFavouriteRecipes(!1,this.setFavouriteStatus)}setLoggedInState(){this.isLoggedIn=Utilities.accountHelper.isLoggedIn()}setupMemberOnlyActions(){this.enableFavourites();this.favouriteToggle.click(this.onFavouriteClick.bind(this));this.isFavourite()}enableFavourites(){this.loginTrigger.addClass("hidden");this.favouriteToggle.removeClass("hidden")}setFavouriteStatus(n){var i=n.split(",");i.forEach(n=>{t(n,!0)})}}n.favouritesRecipeCards=r}(Favourites||(Favourites={})),function(n){class t{baseUrl(){return`/${location.pathname.split("/")[1]}`}dynamicUrl(n){return`${this.baseUrl()}${n}`}}n.localeUrlHelper=new t}(Utilities||(Utilities={})),function(n){var t;(function(n){const t="js-nav-profile-button";class i{constructor(){function i(n){if(document.body.classList.contains("nav-open")){let t=this;document.body.classList.remove("nav-open");window.scrollTo(0,t.scrollBackTo);n.preventDefault()}else{let t=this;t.scrollBackTo=$(document).scrollTop();document.body.classList.add("nav-open");n.preventDefault()}}this.headerLegacyElement=$("[js-nav-legacy]");this.navToggle=$("[data-nav-toggle]");this.headerType=$("main");this.hideAtElement=$("[js-header-hide]");this.headerElement=$(".headerCore");this.accountProfileButton=document.querySelectorAll(`[${t}]`);this.showHideOnScroll=()=>{const t="scroll-up",n="scroll-down",r="started-scrolled";let i=0;$(document).scrollTop()>0&&document.body.classList.add(r);window.addEventListener("scroll",()=>{const u=$(document).scrollTop();if(u<=0){document.body.classList.remove(t);document.body.classList.remove(r);return}u>i&&!document.body.classList.contains(n)?(document.body.classList.remove(t),document.body.classList.add(n)):u<i&&document.body.classList.contains(n)&&(document.body.classList.remove(n),document.body.classList.add(t));i=u})};this.panelIntersect=()=>{window.addEventListener("scroll",()=>{let n=this.hideAtElement.offset().top,t=this.headerElement.outerHeight();const i=$(document).scrollTop();i>=n-t?this.headerElement.addClass("dynamicHide"):this.headerElement.removeClass("dynamicHide")})};this.initializeMutationObserver();this.headerLegacyElement.length>0&&(Array.prototype.forEach.call(this.navToggle,n=>{n.addEventListener("click",i)}),Array.prototype.forEach.call(this.accountProfileButton,n=>{n.addEventListener("click",this.selectAccountProfile.bind(this))}));let n=this.headerType.length==0;if(n)this.showHideOnScroll();else{let n=this.headerType.hasClass("noImageHeader");n&&(this.headerElement.addClass("noBgImage"),this.headerLegacyElement.addClass("noBgImage"));let t=this.headerType.hasClass("standardPage");t&&this.showHideOnScroll();let i=this.headerType.hasClass("dynamicPage");i&&this.hideAtElement.length&&this.panelIntersect()}}selectAccountProfile(n){let i=sessionStorage.getItem("barilla-uid");document.cookie=`buid=${i}`;let r=n.currentTarget;window.location.assign(Utilities.localeUrlHelper.dynamicUrl(r.getAttribute(t)))}initializeMutationObserver(){const n=document.querySelector(".barilla-contactus"),t=document.getElementById("pr-write");if(n||t){const i=new MutationObserver(i=>{i.forEach(i=>{i.addedNodes.forEach(i=>{if(i.nodeType===1){const r=i;t&&r.classList.contains("thank-you-page")&&this.disableScrollBehavior();n&&this.containsClass(r,"formConfirmScreen")&&this.scrollToTop()}})})});t&&i.observe(t,{childList:!0,subtree:!0});n&&i.observe(n,{childList:!0,subtree:!0})}}containsClass(n,t){if(n.classList.contains(t))return!0;for(let n of n.children[Symbol.iterator])if(this.containsClass(n,t))return!0;return!1}disableScrollBehavior(){document.body.classList.remove("scroll-up","scroll-down")}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"});document.body.classList.remove("scroll-up","scroll-down")}}n.HeaderControl=i})(t=n.Layouts||(n.Layouts={}))}(Pages||(Pages={})),function(n){var t;(function(n){const t="js-nav-profile-button";class i{constructor(){this.headerFullElement=$("[js-nav-full]");this.navToggle=$("[js-nav-toggle]");this.navOpen=!1;this.navTierRoot=document.querySelector("[js-nav-tier-root]");this.navTier1Toggles=document.querySelectorAll("[js-nav-tier-toggle]");this.navTierOpen=document.querySelectorAll("[js-nav-tier-open]");this.navTierBack=document.querySelectorAll("[js-nav-tier-back]");this.toggleLocaleButton=document.querySelectorAll("[js-toggle-nav-display]");this.localeButton=document.querySelectorAll("[js-locale-select]");this.accountProfileButton=document.querySelectorAll(`[${t}]`);this.previousTier=0;this.currentTier=0;this.activeTier=new Array(3);this.desktopMediaQuery=window.matchMedia("(min-width: 1280px)");this.headerFullElement.length>0&&(this.activeTier[0]=document.querySelector("[js-nav-tier-0]"),Array.prototype.forEach.call(this.navToggle,n=>{n.addEventListener("click",this.toggleNav.bind(this))}),Array.prototype.forEach.call(this.navTier1Toggles,n=>{n.addEventListener("click",this.openNavTier1.bind(this))}),Array.prototype.forEach.call(this.navTierOpen,n=>{n.addEventListener("click",this.openNavTier.bind(this))}),Array.prototype.forEach.call(this.navTierBack,n=>{n.addEventListener("click",this.navBack.bind(this))}),Array.prototype.forEach.call(this.toggleLocaleButton,n=>{n.addEventListener("click",this.toggleLocaleGroup.bind(this))}),Array.prototype.forEach.call(this.localeButton,n=>{n.addEventListener("click",this.selectLocale.bind(this))}),Array.prototype.forEach.call(this.accountProfileButton,n=>{n.addEventListener("click",this.selectAccountProfile.bind(this))}),this.desktopMediaQuery.addEventListener("change",this.closeNavOnResize.bind(this)))}closeNavOnResize(n){n.matches&&this.currentTier==0&&this.navOpen==!0&&this.toggleNav(null)}updateNavTier(n){this.previousTier=this.currentTier;this.currentTier=n;this.previousTier!==this.currentTier&&(this.navTierRoot.classList.add(`nav-tier-${this.currentTier}-open`),this.navTierRoot.classList.remove(`nav-tier-${this.previousTier}-open`))}toggleNav(n){if(document.body.classList.contains("nav-open")){let t=this;this.removeTierSelectionStyle();document.body.classList.remove("nav-open");t.scrollBackTo>=1&&document.body.classList.add("scroll-up");window.scrollTo(0,t.scrollBackTo);this.navOpen=!1;n!=null&&n.preventDefault()}else{let t=this;t.scrollBackTo=$(document).scrollTop();document.body.classList.add("nav-open");this.navOpen=!0;window.scrollTo(0,0);n!=null&&n.preventDefault()}}removeTierSelectionStyle(){Array.prototype.forEach.call(this.navTier1Toggles,n=>{n.parentElement.tagName=="LI"?n.parentElement.classList.remove("active"):n.classList.remove("active")})}resetNavTier1(){this.closeTier2();let n=document.querySelectorAll(".tier-1.active");Array.prototype.forEach.call(n,n=>{n.classList.remove("active")});this.removeTierSelectionStyle()}openNavTier1(n){this.resetNavTier1();this.navOpen==!1&&this.toggleNav(null);let i=n.target,t=i.getAttribute("js-nav-tier-toggle"),r=document.querySelectorAll('[js-nav-tier-toggle="'+t+'"]');Array.prototype.forEach.call(r,n=>{n.parentElement.tagName=="LI"?n.parentElement.classList.add("active"):n.classList.add("active")});this.updateNavTier(1);this.activeTier[0].classList.add("hidden");let u=document.querySelectorAll('[js-nav-tier="'+t+'"]');Array.prototype.forEach.call(u,n=>{n.classList.add("active"),n.classList.contains("tier-1")&&(this.activeTier[1]=n)})}openNavTier(n){let t=n.target;this.updateNavTier(2);let i=t.parentElement.parentElement.parentElement.querySelectorAll("[js-nav-tier]");Array.prototype.forEach.call(i,n=>{n.parentElement!=t.parentElement&&n.parentElement.classList.remove("active")});this.activeTier[2]=t.parentElement;this.activeTier[2].classList.add("active");this.navOpen==!1&&this.toggleNav(null)}closeTier1(){this.updateNavTier(0);let n=document.querySelectorAll(".burgerNavOptions.mobileLocaleTakeover");Array.prototype.forEach.call(n,n=>{n.classList.remove("active")});this.activeTier[1]&&this.activeTier[1].classList.remove("active");this.removeTierSelectionStyle()}closeTier2(){this.updateNavTier(1);this.activeTier[2]&&this.activeTier[2].classList.remove("active")}navBack(){this.currentTier==1&&(this.closeTier1(),this.activeTier[0].classList.remove("hidden"));this.closeTier2()}toggleLocaleGroup(n){let t=n.target,i=t.nextElementSibling,r=document.querySelectorAll("[js-close-toggle-alt]");Array.prototype.forEach.call(r,n=>{n.addEventListener("click",this.altLocaleClose)});t.classList.contains("opened")?(t.classList.remove("opened"),i.classList.remove("shown")):(this.altLocaleClose(),t.classList.add("opened"),i.classList.add("shown"))}altLocaleClose(){let n=document.querySelectorAll("[js-toggle-nav-content]"),t=document.querySelectorAll("[js-toggle-nav-display]");Array.prototype.forEach.call(n,n=>{n.classList.remove("shown")});Array.prototype.forEach.call(t,n=>{n.classList.remove("opened")})}selectLocale(n){let i=n.currentTarget,t=i.value;if(t){const n=t;n.length>0&&(window.location.href=`/${n}`)}}selectAccountProfile(n){let i=sessionStorage.getItem("barilla-uid");document.cookie=`buid=${i}`;let r=n.currentTarget;window.location.assign(Utilities.localeUrlHelper.dynamicUrl(r.getAttribute(t)))}}n.NavigationControl=i})(t=n.Layouts||(n.Layouts={}))}(Pages||(Pages={})),function(n){var t;(function(n){class t{constructor(){this.attach()}attach(){const n=$(".dropDownNavigation");if(n){this.element=n;this.element.on("change",this.onChange)}}onChange(n){let i=n.currentTarget,t=i.selectedOptions[0];if(t){const n=t.value;n.length>0&&(window.location.href=n)}}}n.DropDownNavigationControl=t})(t=n.Layouts||(n.Layouts={}))}(Pages||(Pages={})),function(n){class t{isMobile(){return/Android|webOS|iPhone|iPad|iPod|Opera Mini/i.test(navigator.userAgent)}}n.deviceInfo=new t}(Utilities||(Utilities={})),function(n){const t="js-faq-module-structured-data-questions";class i{constructor(){this.structuredDataQuestions=document.querySelectorAll(`[${t}]`);this.schemaQuestions="";this.fullSchemaSnippet="";this.addToSchema=n=>{let t=n.innerHTML.replace("[{","{").replace("}]","}");this.schemaQuestions=this.schemaQuestions.concat(t,",")};this.finaliseSchema=()=>{let n=document.title,t=`{
                "@context": "https://schema.org/",
                "@type": "FAQPage",
                "name": "${n}",
                "author": {
                    "@type": "Organization",
                    "name": "Barilla",
                    "url": "https://www.barilla.com",
                    "logo": {
                        "@type": "ImageObject",
                        "url": "https://www.barilla.com/-/media/images/en_us/barilla_logo_blue_bckgrnd.jpg"
                    }
                },
                "mainEntity": [`;this.schemaQuestions=this.schemaQuestions.slice(0,-1);this.fullSchemaSnippet=t.concat(this.schemaQuestions,"]}").replace(/\s+(?=(?:(?:[^"]*"){2})*[^"]*$)/g,"")};this.addToPage=()=>{const n=document.createElement("script");n.type="application/ld+json";n.innerHTML=this.fullSchemaSnippet;$("body").append(n)};this.structuredDataQuestions.length>0&&(Array.prototype.forEach.call(this.structuredDataQuestions,n=>{this.addToSchema(n)}),this.finaliseSchema(),this.addToPage())}}n.FaqPage=i}(StructuredData||(StructuredData={})),function(n){var t;(function(n){class t{constructor(){this.headerControl=new n.HeaderControl;this.legacyHeaderControl=new LegacyHeaderControl;this.navigationControl=new n.NavigationControl;this.dropDownNavigationControl=new n.DropDownNavigationControl;this.textCurveControl=new Controls.TextCurveControl;this.themedCardLayoutControl=new Controls.ThemedCardLayoutControl;Utilities.deviceInfo.isMobile()&&$("body").addClass("mobileType");Utilities.accountHelper.isLoggedIn&&new Favourites.favouritesRecipeCards;new StructuredData.FaqPage}}n.Layout=t})(t=n.Layouts||(n.Layouts={}))}(Pages||(Pages={})),function(n){class t{urlLocaleLanguage(){let t="en",n=`${location.pathname.split("/")[1]}`;return n.toLowerCase()==="uae"&&(n=t),n.toLowerCase()==="global"&&(n=t),n.replace("-","_")}defaultDatePicker(n){return new Datepicker(n,{language:this.urlLocaleLanguage(),autohide:!0,clearButton:!0,todayButton:!0,todayButtonMode:1})}}n.datePickerHelper=new t}(Utilities||(Utilities={})),function(n){class t{update(n){let t=$(n),i=$(document);this.executeOperation(i,t,"js-update-replace",(n,t)=>{n.replaceWith(t)});this.executeOperation(i,t,"js-update-replace-contents",(n,t)=>{n.html(t.html())})}executeOperation(n,t,i,r){function u(t){let f=t.attr(i),u=n.find(`[${i}=${f}]`);if(u.length)return r(u,t),!0}let f=`[${i}]`;u(t)||t.find(f).each((n,t)=>u($(t)))}}n.partialPageUpdater=new t}(Utilities||(Utilities={})),function(n){class t{constructor(){this.scripts=new Map}ensureScriptLoaded(n,t){let i=this.scripts[n];if(i)return i;if(!(document===null||document===void 0?void 0:document.body))throw"Cannot load a script before the document body has been loaded.";return i=new Promise((i,r)=>{var u=document.createElement("script");u.src=n;u.onload=i;u.onerror=r;t&&Object.keys(t).forEach(n=>{u.setAttribute(n,t[n])});document.body.appendChild(u)}),this.scripts[n]=i,i}}n.scriptLoader=new t}(Utilities||(Utilities={})),function(n){let t;class i{constructor(){this.ensureInitialized()}pin(n){var t;let i=(t=n.endTrigger)!==null&&t!==void 0?t:this.getProceedingElement(n.trigger);ScrollTrigger.create({trigger:n.trigger,endTrigger:i,start:"top top",end:"top top",pin:!0,pinSpacing:!1})}ensureInitialized(){t||gsap.registerPlugin(ScrollTrigger)}getProceedingElement(n){if(!n.length)return n;let t=n.next();return t.length?t:this.getProceedingElement(n.parent())}}n.ScrollAnimator=i}(Utilities||(Utilities={}));